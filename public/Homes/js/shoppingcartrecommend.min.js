ec.pkg("ec.shoppingCart.recommend");ec.shoppingCart.recommend.selectSbomIds=function(a,k){var j=[];if(k){var g=$(".sc-pro-list i ");var e=g.length;for(var d=0;d<e;d++){var b=$(g[d]);if(!$(b).hasClass("icon-choose-disabled")){var c=$(b).attr("data-type");var f=$(b).attr("is_bundle");if(f=="0"){j.push($(b).attr("value"))}}}ec.shoppingCart.recommend.productList(j.join(","));sbomCodeArray=null}else{if($(a).hasClass("icon-choose")){var c=$(a).attr("data-type");var f=$(a).attr("is_bundle");var h="";if(f=="0"){j.push($(b).attr("value"))}ec.shoppingCart.recommend.productList(j.join(","))}}j=null};ec.shoppingCart.recommend.productList=function(b){var a="["+b+"]";$.ajax({url:domainCart+"/newcart/shoppingCart/getRecmndProducts.json",data:{saleChannel:1001,salePortal:1,skuids:a},dataType:"jsonp",timeout:10000,jsonpCallback:"flightHandler",success:function(g){$("#pro-recommend-list").html("");if(g.retcode!="0"||$.isEmptyObject(g.recmndProductList)||!g.recmndProductList||g.recmndProductList.length==0){$("#pro-recommend-area").hide();return}var f=[];var c=g.recmndProductList.length;for(var e=0;e<c;e++){var h=g.recmndProductList[e];var d=domainMain+"/product/"+h.id+".html#"+h.skuId;f.push('<li class="swiper-slide" id="recommand-'+h.skuId+'">');f.push('	<div class="discount-detail">');f.push('		<p class="p-img">');f.push('			<a title="'+ec.util.escapeHtml(h.skuName)+'" target="_blank" href="'+d+'">');f.push('				<img src="'+ec.mediaPath+h.photoPath+"142_142_"+h.photoName+'">');f.push("			</a>");f.push('		<p class="p-name"><a  target="_blank" href="'+d+'">'+ec.util.escapeHtml(h.skuAbbr)+"</a></p>");f.push('		<p class="p-price"><b>&yen;&nbsp;'+h.price+"</b></p>");f.push('		<p class="p-button"><a href="javascript:;" data-qty="1" data-type="S0" needResultset="false" maincode="" data-id="'+h.skuId+'" onclick="ec.shoppingCart.addCartItem($(this),false);return false;">加入购物车</a></p>');f.push("	</div>");f.push("</li>")}$("#pro-recommend-list").html(f.join(""));if(f.join("").length>0){$("#pro-recommend-area").show();var c=$(".swiper-slide").length;if(c<=5){$(".swiper-button-prev").addClass("disabled");$(".swiper-button-next").addClass("disabled")}else{$(".swiper-button-next").removeClass("disabled")}ec.shoppingCart.recommend.scroll()}}})};ec.shoppingCart.recommend.scroll=function(){var a=new Swiper("#pro-list-recommend",{slidesPerView:5,slidesPerGroup:5});$(".swiper-button-prev").click(function(){a.swipePrev()});$(".swiper-button-next").click(function(){a.swipeNext()})};